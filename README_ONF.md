# Extracting protobuf from ASN.1

This project adds a -B option to output .proto files from ASN.1
(work in progress).

This approach generates protobufs like XSD is generated from asn1c.


For a very rudimentary conversion try:
```bash
./asn1c/asn1c -B examples/rectangle.asn
# Protobuf generated by asn1c-0.9.29 -->
# ASN.1 module RectangleModule from in examples/rectangle.asn

syntax = "proto3";

package e2ctypes;

message Rectangle {
    int32 height = 1;
    int32 width = 2;
}
```

For something a bit fancier try
```bash
./asn1c/asn1c -B examples/SeanModule.asn
# Protobuf generated by asn1c-0.9.29 -->
# ASN.1 module MyModule from in examples/SeanModule.asn

syntax = "proto3";

package e2ctypes;

message MyTypes {
    BasicOid myObjectId = 1;
    repeated TODO find reference mySeqOf = 2;
    BitString myBitString = 3;
}

message MyInt {
 int32 value = 1;
}
```

To go all out on the E2AP ASN.1 model try
```bash
./asn1c/asn1c -B examples/e2ap-v01.00.00.asn 
WARNING: Parameterized type maxProtocolIEs expected for maxProtocolIEs at line 1543 in examples/e2ap-v01.00.00.asn
<repeated>
# Protobuf generated by asn1c-0.9.29 -->
# ASN.1 module E2AP-PDU-Descriptions { iso(1) identified-organization(3) dod(6) internet(1)
	private(4) enterprise(1) 53148 e2(1) version1(1) e2ap(1)
	e2ap-PDU-Descriptions(0) }
from in examples/e2ap-v01.00.00.asn

syntax = "proto3";

package e2ctypes;

message E2AP-ELEMENTARY-PROCEDURE {
&InitiatingMessage = 1;
&SuccessfulOutcome = 2;
&UnsuccessfulOutcome = 3;
&procedureCode = 4;
&criticality = 5;
}

...continues for 100s of lines
```